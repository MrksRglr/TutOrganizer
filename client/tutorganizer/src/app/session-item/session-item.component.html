@let s = session()!;
<div class="card bg-teal-100 text-primary-content w-96">
  <div class="card-body">
    <p class="absolute left-2 top-2">#{{s.id}}</p>
    <h2 class="card-title">[{{ s.offer.course.code }}] {{ s.offer.course.name }}</h2>
    <p class="font-semibold">Anbieter:
      <button class="btn opacity-80 btn-active btn-neutral">{{ s.offer.user.name }}</button>
    </p>
    <p class="font-semibold">angefragt von:
      <button class="btn opacity-80 btn-active btn-neutral">{{ s.inquiry.user.name }}</button>
    </p>
    <p class="font-semibold">Status:
      <button class="btn opacity-80 btn-active btn-neutral">{{  s.status }}</button>
    </p>
    <p class="font-semibold">Erfolgreich durchgeführt:
      <input type="checkbox" [checked]="s.successfully_completed" disabled />
    </p>
    <div class="mt-3">
      <p class="font-semibold">Timeslots:</p>
      <ul class="list-disc list-inside text-sm ml-2">
        @for (slot of s.timeslots; track slot) {
          <li>
            {{ slot.start_time | date:'short' }} – {{ slot.end_time | date:'shortTime' }}
          </li>
        }
      </ul>
    </div>
    @if (s && isEditing) {
      <textarea
        [formControl]="editSessionControl"
        class="textarea textarea-bordered w-full"
        rows="5">
        </textarea>
      <div class="flex gap-2 mt-2">
        <button class="btn btn-primary btn-outline" (click)="saveEdit()">Speichern</button>
        <button class="btn btn-secondary btn-outline" (click)="cancelEdit()">Verwerfen</button>
      </div>
    } @else {
      <p class="py-4">{{ s.comment }}</p>

      @if (s && !isEditing) {
        <div class="modal-action">
          <button class="btn btn-warning btn-outline" (click)="startEdit()">bearbeiten</button>
          @if (isTutor()) {
            <button class="btn btn-error btn-outline" (click)="removeSession()">löschen</button>
          }

          @if (isStudent()) {
            <button class="btn btn-success btn-sm" (click)="acceptSession()">Termin bestätigen</button>
            <button class="btn btn-error btn-sm" (click)="rejectSession()">Ablehnen</button>
          }
        </div>}
    }
  </div>
</div>
